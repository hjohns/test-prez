import{_ as O}from"./nuxt-link.a33cd54d.js";import{j as C,q as z,o as s,h as f,w as y,d as c,x as R,g as t,y as M,c as a,t as l,z as n,a as d,F as j,n as H,b as A,A as E,s as I,r as F,k as P,f as U,B as W}from"./entry.bcf69c92.js";import{_ as q}from"./_plugin-vue_export-helper.c27b6911.js";import{_ as G,a as J}from"./Loading.vue.1b0e05ea.js";import{a as V}from"./str.08505d9c.js";import{u as K}from"./rdf.477be283.js";const Q=C({__name:"prez:members",props:{info:{},form:{}},setup(_){return(r,i)=>{const p=z("v-btn");return s(),f(p,{to:r.info[0].fields["prez:link"]},{default:y(()=>[c("View Members")]),_:1},8,["to"])}}});const X=q(Q,[["__scopeId","data-v-c0694020"]]),T={"prez:members":X},Y=C({__name:"index",props:{fieldName:{},form:{},info:{}},setup(_){return(r,i)=>(s(),f(R(t(T)[r.fieldName]),{info:r.info,form:r.form},null,8,["info","form"]))}}),Z={key:0,class:"form",style:{position:"relative"}},x={key:0,class:"text-h3 mb-5 mt-2"},ee={key:0},oe={colspan:"2"},re={style:{"white-space":"nowrap"}},se=["href","title"],te={key:0},ne=["title"],ae={key:1},ie=C({__name:"Form",props:{form:{},formTitle:{},headerTitle:{},excludeFields:{},fields:{},info:{type:Boolean},links:{}},setup(_){const r=_,i=r.excludeFields?r.excludeFields:[/^prez:./],p=(r.fields?r.fields:Object.keys(r.form.formHeaders)).filter(e=>{if(!(e in r.form.formHeaders)||!(e in r.form.fields))return console.warn(`${e} not found in form
(${Object.keys(r.form.formHeaders)})`),!1;if(e in T)return i.indexOf(e)>=0?!!(r.fields&&r.fields.indexOf(e)>=0):!0;for(const k in i)if(e.match(i[k]))return!1;return!0}),h=e=>Array.isArray(r.form.fields[e])&&typeof r.form.fields[e][0]=="object",w=e=>Array.isArray(r.form.fields[e])&&typeof r.form.fields[e][0]=="string";return M(),(e,k)=>{const u=z("v-chip"),v=z("v-icon"),b=O,$=D,B=Y,m=z("v-table"),N=G;return e.form&&e.form.count>0?(s(),a("div",Z,[e.headerTitle&&e.form?(s(),a("div",x,l(t(V)(e.headerTitle,e.form)),1)):n("",!0),e.form.header.label?(s(),f(u,{key:1,variant:"flat",style:{position:"absolute",right:"0",top:"0"}},{default:y(()=>[c(l(e.form.header.label),1)]),_:1})):n("",!0),e.form?(s(),f(m,{key:2,theme:"dark"},{default:y(()=>[e.formTitle?(s(),a("thead",ee,[d("tr",null,[d("th",oe,l(t(V)(e.formTitle,e.form)),1)])])):n("",!0),d("tbody",null,[(s(!0),a(j,null,H(t(p),o=>{var g,S;return s(),a("tr",null,[d("th",re,[c(l(e.form.formHeaders[o].label)+" Â ",1),d("a",{href:e.form.formHeaders[o].iri,title:o},[A(v,{icon:"mdi-link"})],8,se),e.info?(s(),a("div",te,l(o),1)):n("",!0)]),o in t(T)?(s(),a("td",ae,[o in t(T)?(s(),f(B,{key:0,form:e.form,info:e.form.fields[o],"field-name":o},null,8,["form","info","field-name"])):n("",!0)])):(s(),a("td",{key:0,class:E(h(o)?"td-nest":void 0)},[(S=(g=e.form.fields._meta)==null?void 0:g[o])!=null&&S.type?(s(),f(u,{key:0,size:"x-small"},{default:y(()=>[c(l(e.form.fields._meta[o].type),1)]),_:2},1024)):n("",!0),d("div",{title:o in e.form.fields._meta&&e.form.fields[o]!=e.form.fields._meta[o].value?e.form.fields._meta[o].value:null},[o=="prez:link"?(s(),f(b,{key:0,to:e.form.fields[o]},{default:y(()=>[c(l(e.form.fields[o]),1)]),_:2},1032,["to"])):n("",!0),c(" "+l(typeof e.form.fields[o]!="object"&&o!="prez:link"?e.form.fields[o]:"")+" "+l(w(o)?e.form.fields[o].join(", "):"")+" ",1),h(o)?(s(!0),a(j,{key:1},H(e.form.fields[o],L=>(s(),f($,{form:L,"exclude-fields":t(i)},null,8,["form","exclude-fields"]))),256)):n("",!0)],8,ne)],2))])}),256))])]),_:1})):n("",!0),A(N,{links:e.links},null,8,["links"])])):n("",!0)}}});const D=q(ie,[["__scopeId","data-v-f5f1bd79"]]),_e=C({__name:"Form",props:{dataUrl:{},formTitle:{},excludeFields:{},headerTitle:{},fields:{},info:{type:Boolean}},setup(_){const r=_,i=K(),{loading:p,success:h,error:w,prez:e}=I(i),k=F(1),u=F(void 0),v=F(null);P(async()=>{await B()});const b=U(),$=F(b.query);W(()=>$.value=b.query,()=>{});async function B(){if(await i.load(r.dataUrl,{params:{page:k.value}}),h.value)try{v.value=null,u.value=e.value.form(["skos:prefLabel","dcterms:title","rdfs:label","schema:name"],["skos:definition","dcterms:description","schema:description"])}catch(m){v.value=m.message}}return(m,N)=>{const o=D,g=J;return s(),a(j,null,[t(u)?(s(),f(o,{key:0,"header-title":m.headerTitle,"form-title":m.formTitle,form:t(u),fields:m.fields,"exclude-fields":m.excludeFields,info:m.info,links:t(e).headerLinks},null,8,["header-title","form-title","form","fields","exclude-fields","info","links"])):n("",!0),A(g,{loading:t(p),error:t(w)},null,8,["loading","error"])],64)}}});export{_e as _};
